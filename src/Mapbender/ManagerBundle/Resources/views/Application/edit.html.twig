{% extends "FOMManagerBundle::manager.html.twig" %}

{% block title %}{{ application.title }}{% endblock %}

{% block manager_css %}
<link rel="stylesheet" href="{{ asset('bundles/mapbendermanager/style/style.css') }}" >
{% endblock %}

{% block manager_js %}
<script type="text/javascript" src="{{ asset('bundles/fomuser/js/acl-form.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/mopabootstrap/js/mopabootstrap-collection.js') }}"></script>
<script type="text/javascript" src="{{ asset('bundles/mapbendermanager/js/edit.js') }}"></script>
{% endblock %}

{% block manager_content %}

<form action="{{ path('mapbender_manager_application_update', { 'slug': application.slug }) }}" method="post" name="{{ form_name }}" {{ form_enctype(form)}} class="well">

    {{ form_row(form._token) }}

    {%include "MapbenderManagerBundle:Application:form-edit.html.twig" %}

    <footer>
        <div class="btn-group">
            <input type="submit" value="{{ 'Update' | trans }}" class="btn btn-primary"/>
            <a href="{{ url('mapbender_manager_application_confirmdelete', { 'slug': application.slug } )}}" class="btn btn-warning">{{ 'Delete' | trans}}</a>
            <a href="{{ url('mapbender_manager_application_index') }}" class="btn">{{ 'Cancel' | trans}}</a>
        </div>
    </footer>
</form>

<div id="repository-list-modal"  class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>{{ "Select Source"|trans }}</h3>
    </div>
    <div class="modal-body">
        <table class="table table-striped" id="repository-list">
            <thead>
                <tr>
                    <th>{{ 'SourceId' | trans }}</th>
                    <th>{{ 'Type' | trans }}</th>
                    <th>{{ 'Title' | trans }}</th>
                    <th>{{ 'Alias' | trans }}</th>
                    <th>{{ 'Description' | trans }}</th>
                    <th>{{ 'Actions' | trans }}</th>
                </tr>
            </thead>
            <tbody>
                {% for source in sources %}
                <tr data-source-id="{{ source.id }}">
                    <td>{{ source.id }}</td>
                    <td>{{ source.type }}</td>
                    <td>{{ source.title }}</td>
                    <td>{{ source.alias }}</td>
                    <td>{{ source.description }}</td>
                    <td>
                        <div class="entity-actions btn-group">
                            <form method="post" class="action-add" action="{{ url("mapbender_manager_application_addlayerset",{"slug":application.slug} ) }}" title="{{ 'Add' | trans }}" >
                                <input type="hidden" name="sourceId" value="{{ source.id }}" />
                                <input class="btn" type="submit" value="{{ 'Add' | trans }}" />
                            </form>
                        </div>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<div id="repository-instance-modal"  class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>{{ "Edit Instance"|trans }}</h3>
    </div>
    <div class="modal-body"></div>
</div>
<div id="repository-instancelayers-modal"  class="modal hide fade">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>{{ "Edit Instance Layers"|trans }}</h3>
    </div>
    <div class="modal-body"></div>
</div>
{% endblock %}
